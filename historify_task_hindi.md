# PROMPT: Angel One ऐतिहासिक डेटा के लिए Historify डेटा प्रबंधन प्रणाली (Data Management System) को एकीकृत करें

https://github.com/marketcalls/historify पर Historify रिपॉजिटरी का अध्ययन करें और हमारे ML ट्रेडिंग एप्लिकेशन में विशेष रूप से Angel One ब्रोकर एकीकरण के लिए इसके पूर्ण डेटा प्रबंधन आर्किटेक्चर को लागू करें।

## मुख्य आवश्यकताएं (CORE REQUIREMENTS):

### 1. Historify से डेटा स्टोरेज आर्किटेक्चर:
Historify के SQLite-आधारित स्टोरेज सिस्टम को दोहराएं लेकिन इसे हमारे PostgreSQL TimescaleDB सेटअप के लिए अनुकूलित करें। OHLCV डेटा को स्टोर करने के लिए इन सटीक संरचनाओं के साथ उनकी टेबल स्कीमा डिज़ाइन को लागू करें:
- **symbols टेबल**: ट्रेडिंग सिंबल, Angel One टोकन, एक्सचेंज, सेगमेंट, इंस्ट्रूमेंट टाइप, लॉट साइज, टिक साइज, फ्यूचर्स और ऑप्शन्स के लिए एक्सपायरी डेट सहित इंस्ट्रूमेंट विवरण स्टोर करना।
- **ohlc_data हाइपरटेबल**: सिंबल और टाइमस्टैम्प पर कंपोजिट इंडेक्स के साथ फ्यूचर्स और ऑप्शन्स के लिए टाइमस्टैम्प, ओपन, हाई, लो, क्लोज, वॉल्यूम, OI स्टोर करना, जो समय के अनुसार विभाजित (partitioned) हो।
- **data_status टेबल**: प्रत्येक सिंबल के लिए डाउनलोड स्थिति को ट्रैक करना, जिसमें सिंबल, टाइमफ्रेम, अंतिम अपडेट की तारीख, कुल रिकॉर्ड, स्थिति (सफलता या विफलता), त्रुटि संदेश जैसे फ़ील्ड हों।
ऑप्टिमल क्वेरी परफॉरमेंस के लिए मास्टर डेटा को टाइम-सीरीज डेटा से अलग रखते हुए Historify के नॉर्मलाइजेशन दृष्टिकोण को बनाए रखें।

### 2. Angel One सिंबल मास्टर प्रबंधन:
Historify के सिंबल मास्टर सिंक्रोनाइज़ेशन को लागू करें लेकिन विशेष रूप से Angel One SmartAPI से। एक स्वचालित दैनिक सिंक (automated daily sync) बनाएं जो Angel One API से NSE इक्विटी, BSE इक्विटी, NFO फ्यूचर्स और ऑप्शन्स, MCX कमोडिटी, CDS करेंसी के सभी कॉन्ट्रैक्ट विवरणों के साथ पूरी इंस्ट्रूमेंट सूची खींचता है।
- Angel One विशिष्ट फ़ील्ड्स को स्टोर करें जिनमें टोकन, exchange_token, सिंबल, trading_symbol, instrument_type, एक्सचेंज, सेगमेंट, एक्सपायरी, स्ट्राइक, option_type, lot_size, tick_size शामिल हैं।
- Historify की सिंबल खोज और फ़िल्टरिंग को लागू करें जो उपयोगकर्ताओं को नाम से खोजने, सेगमेंट, प्रकार, एक्सपायरी डेट के आधार पर फ़िल्टर करने की अनुमति दे।
- NIFTY50 स्टॉक्स, बैंक निफ्टी स्टॉक्स, कस्टम वॉचलिस्ट जैसे सिंबल समूह (symbol groups) बनाएं।
- ऑटो-अपडेट मैकेनिज्म जोड़ें जो तब सिंबल मास्टर को रिफ्रेश करे जब Angel One नए कॉन्ट्रैक्ट जोड़ता है या मौजूदा को संशोधित करता है, विशेष रूप से F&O और MCX मासिक कॉन्ट्रैक्ट रोलओवर के लिए।

### 3. Angel One से ऐतिहासिक डेटा डाउनलोडर:
Angel One ऐतिहासिक डेटा API को कॉल करने वाले Historify के बल्क डाउनलोड सिस्टम को दोहराएं।
- टोकन बकेट एल्गोरिदम के साथ रेट लिमिटर का उपयोग करके 3 अनुरोध प्रति सेकंड की Angel One दर सीमा (rate limit) का सम्मान करते हुए विन्यास योग्य (configurable) करेंसी लिमिट के साथ समानांतर में कई सिंबल डाउनलोड करने वाली उनकी बैच प्रोसेसिंग को लागू करें।
- API कॉल के लिए उचित अंतराल कोड के साथ ONE_MINUTE, THREE_MINUTE, FIVE_MINUTE, FIFTEEN_MINUTE, THIRTY_MINUTE, ONE_HOUR, ONE_DAY सहित सभी Angel One टाइमफ्रेम का समर्थन करें।
- Historify की डेट रेंज हैंडलिंग को लागू करें जो उपयोगकर्ताओं को from_date और to_date निर्दिष्ट करने, मौजूदा डेटा में अंतराल (gaps) का पता लगाने और उन्हें भरने, अंतिम अपडेट के बाद से केवल नई कैंडल्स डाउनलोड करने वाले इंक्रीमेंटल अपडेट का समर्थन करने की अनुमति दे।
- उनकी प्रगति ट्रैकिंग (progress tracking) जोड़ें जो प्रति सिंबल डाउनलोड प्रगति, कुल सिंबल पूर्ण, अनुमानित शेष समय, वर्तमान डाउनलोड गति दिखाए, और रुकावट के बाद फिर से शुरू (resume) करने की अनुमति देने वाली प्रगति को बनाए रखे (persist)।
- Angel One API पेजिंग को संभालें क्योंकि वे प्रति अनुरोध अधिकतम 1000 कैंडल लौटाते हैं, बड़ी डेट रेंज के लिए स्वचालित पेजिंग लागू करें।

### 4. डेटा वैलिडेशन और गुणवत्ता जांच:
लापता टाइमस्टैम्प, डेटा श्रृंखला में अंतराल का पता लगाने, OHLC संबंधों को मान्य करने (यह सुनिश्चित करना कि High >= Open/Close, Low <= Open/Close, Open/Close High और Low के बीच हों) के लिए Historify के व्यापक डेटा वैलिडेशन को लागू करें।
- OHLC या वॉल्यूम में शून्य या नकारात्मक मानों का पता लगाकर उन्हें अमान्य घोषित करें।
- डुप्लिकेट टाइमस्टैम्प की जांच करें और डुप्लिकेट को हटाएं या मर्ज करें।
- मूविंग एवरेज की तुलना में असामान्य वॉल्यूम का पता लगाने वाले वॉल्यूम स्पाइक्स को मान्य करें और समीक्षा के लिए फ्लैग करें।
- Angel One विशिष्ट वैलिडेशन जोड़ें जैसे इक्विटी के लिए कॉर्पोरेट एक्शन समायोजन की जांच करना (स्प्लिट, बोनस, डिविडेंड के लिए कीमतों को समायोजित करना), F&O OI मानों को मान्य करना (गैर-नकारात्मक और उचित सुनिश्चित करना), नए कॉन्ट्रैक्ट महीने में रोल करते समय MCX कॉन्ट्रैक्ट निरंतरता की जांच करना।
- डेटा गुणवत्ता स्कोर गणना लागू करें जो पूर्णता, सटीकता, स्थिरता के आधार पर स्कोर निर्दिष्ट करे। डेटा गुणवत्ता रिपोर्ट तैयार करें जो ध्यान देने योग्य मुद्दों वाले सिंबल दिखाए।

### 5. कॉर्पोरेट एक्शन हैंडलिंग:
Historify के कॉर्पोरेट एक्शन समायोजन सिस्टम को दोहराएं।
- Angel One से स्प्लिट्स, बोनस, डिविडेंड्स, फेस वैल्यू में बदलाव सहित कॉर्पोरेट एक्शन प्राप्त करें।
- ex_date, action_type, ratio, old_value, new_value के साथ कॉर्पोरेट एक्शन स्टोर करें।
- स्प्लिट्स और बोनस के लिए ex_date से पहले ऐतिहासिक कीमतों को समायोजित करने वाला बैकवर्ड एडजस्टमेंट लागू करें।
- प्रत्येक एक्शन के लिए समायोजन कारक (adjustment factor) की गणना करें (स्प्लिट्स के लिए मल्टीप्लिकेटिव फैक्टर्स लागू करें)।
- बोनस इश्यू को संभालें (अनुपात द्वारा कीमतों को समायोजित करें)।
- उपयोगकर्ता की पसंद के आधार पर वैकल्पिक रूप से डिविडेंड के लिए समायोजित करें।
- समायोजित और असमायोजित दोनों डेटा बनाए रखें जिससे उपयोगकर्ता चुन सकें।
- नए कॉर्पोरेट एक्शन का पता चलने पर प्रभावित सिंबल के लिए सभी ऐतिहासिक डेटा को फिर से प्रोसेस करने वाला बल्क एडजस्टमेंट लागू करें।

### 6. निरंतर डेटा अपडेट (Continuous Data Updates):
Historify के बैकग्राउंड अपडेट सिस्टम को एक शेड्यूल किए गए जॉब के रूप में लागू करें।
- कई अपडेट आवृत्तियों का समर्थन करें:
  - रीयल-टाइम: बाजार के घंटों के दौरान Angel One WebSocket का उपयोग करके लाइव टिक्स कैप्चर करना और उच्च टाइमफ्रेम में एग्रीगेट करना।
  - एंड-ऑफ-डे: बाजार बंद होने के बाद 16:00 बजे दिन का डेटा डाउनलोड करना।
  - साप्ताहिक: साप्ताहिक चार्ट के लिए अपडेट।
  - मासिक: मासिक डेटा के लिए अपडेट।
- उनके स्मार्ट अपडेट लॉजिक को लागू करें जो डाउनलोड का प्रयास करने से पहले जांचता है कि बाजार खुला है या नहीं, सप्ताहांत/छुट्टियों जैसे गैर-ट्रेडिंग दिनों को स्वचालित रूप से छोड़ देता है, आंशिक ट्रेडिंग दिनों का पता लगाकर तदनुसार अपडेट करता है, यदि आवश्यक हो तो प्री-मार्केट/पोस्ट-मार्केट सत्रों को अलग से संभालता है।
- अपडेट कतार प्रणाली (update queue system) जोड़ें जो उपयोगकर्ता सदस्यता या सक्रिय रणनीतियों के आधार पर प्राथमिकता देते हुए अपडेट के लिए सिंबल को कतार में खड़ा करे, एक्सपोनेंशियल बैकऑफ के साथ विफल अपडेट के लिए री-ट्राई लॉजिक लागू करे, टाइमस्टैम्प और सफलता/विफलता काउंट के साथ अपडेट इतिहास को ट्रैक करे।

### 7. डेटा निर्यात और बैकअप:
Historify की निर्यात कार्यक्षमता को दोहराएं जो कई प्रारूपों में डेटा निर्यात की अनुमति देती है।
- विन्यास योग्य (configurable) डिलिमिटर, डेट फॉर्मेट, कॉलम चयन के साथ CSV निर्यात।
- कुशल भंडारण और पांडा (pandas) संगतता के लिए Parquet निर्यात, API प्रतिक्रियाओं के लिए JSON निर्यात, मैन्युअल विश्लेषण के लिए Excel निर्यात का समर्थन करें।
- उनके बैकअप सिस्टम को लागू करें: पूर्ण डेटाबेस का स्वचालित दैनिक बैकअप, पिछले बैकअप के बाद से केवल नए डेटा को स्टोर करने वाला इंक्रीमेंटल बैकअप, gzip या zstd का उपयोग करके संकुचित बैकअप।
- उपयोगकर्ता कॉन्फ़िगरेशन के आधार पर S3, Google Drive, Dropbox पर अपलोड करने वाला क्लाउड बैकअप।
- बैकअप प्रतिधारण नीति (retention policy) जो पिछले N बैकअप रखती है और पुराने को ऑटो-डिलीट करती है।
- डेटा को किसी भी बैकअप पॉइंट से रिस्टोर करने की अनुमति देने वाली रिस्टोर कार्यक्षमता जोड़ें।

### 8. डेटा अखंडता और स्थिरता (Integrity and Consistency):
समय-समय पर चलने वाली Historify की डेटा अखंडता जांच को लागू करें।
- रेफ़रेंशियल अखंडता सत्यापित करें (यह सुनिश्चित करना कि सभी OHLC रिकॉर्ड मास्टर टेबल में वैध सिंबल का संदर्भ देते हैं)।
- टाइमस्टैम्प स्थिरता की जांच करें (कालानुक्रमिक क्रम सुनिश्चित करना, कोई भविष्य की तारीख नहीं)।
- TimescaleDB में विभाजन अखंडता (partition integrity) को मान्य करें।
- अनाथ रिकॉर्ड (orphaned records) का पता लगाएं (बिना संबंधित सिंबल वाला डेटा)।
- सामान्य समस्याओं के लिए ऑटो-रिपेयर लागू करें जैसे टाइमस्टैम्प फॉर्मेट ठीक करना, एक्सचेंज कोड सही करना, समाप्त हो चुके इंस्ट्रूमेंट को अपडेट करना।
- डेटाबेस रखरखाव कार्य जोड़ें जैसे री-इंडेक्सिंग, विभाजन अनुकूलन, क्वेरी प्लानिंग के लिए टेबल्स का विश्लेषण, वैक्यूमिंग (हटाए गए रिकॉर्ड की सफाई), और यदि भ्रष्ट हो तो इंडेक्स की मरम्मत करना।

### 9. मल्टी-टाइमफ्रेम डेटा प्रबंधन:
बेस टाइमफ्रेम पर डेटा स्टोर करने और मांग पर उच्च टाइमफ्रेम उत्पन्न करने वाले Historify के मल्टी-टाइमफ्रेम हैंडलिंग को दोहराएं।
- Angel One से उपलब्ध सबसे बारीक ग्रैन्युलैरिटी (टिक या मिनट डेटा) को बेस टाइमफ्रेम के रूप में स्टोर करें।
- कुशल SQL क्वेरीज़ या पांडा रीसैम्पलिंग का उपयोग करके मिनट को 5-मिनट, 15-मिनट, घंटे, दैनिक डेटा में परिवर्तित करने वाला ऑन-द-फ्लाई एग्रीगेशन लागू करें।
- बार-बार एग्रीगेशन से बचने के लिए Redis में अक्सर एक्सेस किए जाने वाले टाइमफ्रेम को कैश करें।
- उपयोगकर्ता की जरूरतों के आधार पर 2-मिनट, 7-मिनट जैसे कस्टम टाइमफ्रेम का समर्थन करें (बेस टाइमफ्रेम से एग्रीगेट करके)।
- पूर्व-गणना किए गए रोलअप के लिए TimescaleDB निरंतर एग्रीगेट्स (continuous aggregates) का उपयोग करके टाइम-बकेट फ़ंक्शन लागू करें।
- समय क्षेत्र रूपांतरण संभालें (क्योंकि Angel One IST में डेटा देता है, सुसंगत भंडारण और पुनर्प्राप्ति सुनिश्चित करें)।

### 10. क्वेरी इंटरफ़ेस और डेटा एक्सेस:
एप्लिकेशन के लिए डेटा लाने के लिए Historify के डेटा पुनर्प्राप्ति API को लागू करें।
- `get_historical_data` फ़ंक्शन बनाएं जो पैरामीटर (सिंबल, टाइमफ्रेम, from_date, to_date) स्वीकार करे और पांडा डेटाफ़्रेम लौटाए।
- वर्तमान कैंडल डेटा के लिए `get_latest_candle` लागू करें।
- पेजिनेशन के साथ डेट रेंज क्वेरीज़ के लिए `get_ohlc_range` जोड़ें।
- एक ही कॉल में कई सिंबल लाने वाली बल्क क्वेरीज़ का समर्थन करें।
- बड़े डेटासेट के लिए स्ट्रीमिंग इंटरफ़ेस लागू करें जो मेमोरी समस्याओं से बचने के लिए टुकड़ों (chunks) में डेटा दे।
- डेटाबेस इंडेक्स, क्वेरी प्लानिंग का उपयोग करके क्वेरी अनुकूलन जोड़ें।
- TTL के साथ Redis में लगातार किए जाने वाले प्रश्नों को कैश करें।
- यदि डेटाबेस लोड अधिक है तो रीड रेप्लिका (read replicas) लागू करें।
- डेटाबेस कनेक्शन को कुशलतापूर्वक प्रबंधित करने के लिए कनेक्शन पूल (connection pooling)।

### 11. डेटा मेट्रिक्स और मॉनिटरिंग:
सिस्टम स्वास्थ्य दिखाने वाले Historify के मॉनिटरिंग डैशबोर्ड को दोहराएं।
- ट्रैक करें: कुल मॉनिटर किए गए सिंबल, कुल स्टोर किए गए रिकॉर्ड, डेटाबेस आकार विकास दर।
- डेटा ताजगी (data freshness) की निगरानी करें (प्रति सिंबल अंतिम अपडेट समय दिखाएं, अपडेट की आवश्यकता वाले सिंबल)।
- डाउनलोड आंकड़े ट्रैक करें (सफल डाउनलोड, विफल डाउनलोड, औसत डाउनलोड समय, किए गए API कॉल, दर सीमा उपयोग)।
- स्टोरेज मेट्रिक्स की गणना करें (प्रति सिंबल डेटा, औसत कैंडल आकार, कम्प्रेशन के बाद स्टोरेज दक्षता)।
- डेटा गुणवत्ता मेट्रिक्स दिखाएं (पूर्णता प्रतिशत, सटीकता स्कोर, वैलिडेशन त्रुटियों वाले सिंबल)।
- अलर्टिंग सिस्टम लागू करें जो डेटा अपडेट विफल होने, महत्वपूर्ण सिंबल का डेटा गायब होने, API त्रुटियों, या डेटाबेस स्पेस कम होने पर सूचनाएं भेजे।
- समय के साथ सभी मेट्रिक्स की कल्पना करने के लिए Grafana डैशबोर्ड एकीकरण जोड़ें।

### 12. प्रदर्शन अनुकूलन (Performance Optimization):
Historify की प्रदर्शन अनुकूलन रणनीतियों को लागू करें।
- बल्क इंसर्ट का उपयोग करें (डेटाबेस में लिखने से पहले रिकॉर्ड को 1000 या 10000 के समूहों में बैच करें)।
- थ्रेड पूल या एसिंक IO का उपयोग करके समानांतर डाउनलोड लागू करें (एक साथ कई सिंबल डाउनलोड करना)।
- उपयुक्त इंडेक्स, क्वेरी हिंट्स, धीमे प्रश्नों के लिए explain analyze का उपयोग करके डेटाबेस क्वेरीज़ को अनुकूलित करें।
- TimescaleDB नेटिव कम्प्रेशन का उपयोग करके डेटा कम्प्रेशन लागू करें (स्टोरेज को 90% तक कम करना)।
- हॉट डेटा (अक्सर एक्सेस किए जाने वाले सिंबल या हाल का डेटा) को Redis में कैश करें।
- लेज़ी लोडिंग लागू करें (डेटा केवल एक्सेस करने पर लोड करें, स्टार्टअप पर सब कुछ नहीं)।
- कनेक्शन पूल का उपयोग करें (डेटाबेस कनेक्शन का पुन: उपयोग)।
- मेमोरी उपयोग को अनुकूलित करें (डेटा को पूरी तरह से लोड करने के बजाय स्ट्रीम करें और टुकड़ों में प्रोसेस करें)।

### 13. त्रुटि हैंडलिंग और लचीलापन (Error Handling and Resilience):
Historify की मजबूत त्रुटि हैंडलिंग को दोहराएं।
- Angel One API त्रुटियों को पकड़ें (रेट लिमिट पार होने पर देरी के बाद पुनः प्रयास, अमान्य सिंबल को छोड़ना और लॉग करना, नेटवर्क टाइमआउट पर एक्सपोनेंशियल बैकऑफ के साथ पुनः प्रयास, प्रमाणीकरण विफलता पर टोकन रीफ्रेश और पुनः प्रयास)।
- डेटाबेस त्रुटियों को संभालें (कनेक्शन खो जाने पर फिर से कनेक्ट करना, डेडलॉक पर ट्रांजेक्शन पुनः प्रयास, डिस्क फुल होने पर एडमिनिस्ट्रेटर को अलर्ट)।
- सर्किट ब्रेकर लागू करें (यदि बहुत अधिक लगातार विफलताएं हों तो संसाधनों की बर्बादी से बचने के लिए डाउनलोड रोक दें)।
- डेटा वैलिडेशन त्रुटियों को जोड़ें (मैन्युअल समीक्षा के लिए अमान्य रिकॉर्ड लॉग करना, पूरी प्रक्रिया को न रोकना)।
- ग्रेसफुल डिग्रेडेशन लागू करें (यदि कुछ सिंबल विफल हो जाते हैं तो उपलब्ध डेटा के साथ जारी रखें)।
- विस्तृत त्रुटि लॉगिंग जोड़ें (डीबगिंग के लिए पूर्ण स्टैक ट्रेस, अनुरोध पैरामीटर, प्रतिक्रिया कैप्चर करना)।

### 14. कॉन्फ़िगरेशन और अनुकूलन:
Historify के लचीले कॉन्फ़िगरेशन सिस्टम को लागू करें।
- उपयोगकर्ताओं को कॉन्फ़िगर करने की अनुमति दें: डाउनलोड शेड्यूल, कौन से टाइमफ्रेम डाउनलोड करने हैं, डेट रेंज सीमाएं।
- रेट लिमिटिंग पैरामीटर सेट करें (अनुरोध प्रति सेकंड, बर्स्ट अलाउंस)।
- री-ट्राई पैरामीटर कॉन्फ़िगर करें (अधिकतम री-ट्राई, बैकऑफ गुणक)।
- डेटा वैलिडेशन नियम अनुकूलित करें (वॉल्यूम स्पाइक्स, OHLC संबंधों के लिए थ्रेसहोल्ड)।
- स्टोरेज प्राथमिकताएं सेट करें (कम्प्रेशन स्तर, विभाजन अंतराल, प्रतिधारण अवधि)।
- बैकअप शेड्यूल, स्थान, क्लाउड क्रेडेंशियल्स परिभाषित करें।
- मॉनिटरिंग अलर्ट, थ्रेसहोल्ड, नोटिफिकेशन चैनल कॉन्फ़िगर करें।
- अलग-अलग उपयोग के मामलों के लिए कई कॉन्फ़िगरेशन प्रोफाइल का समर्थन करें।
- प्रति-सिंबल कॉन्फ़िगरेशन की अनुमति दें (सक्रिय रूप से ट्रेड किए जाने वाले सिंबल के लिए उच्च प्राथमिकता, विशिष्ट रणनीतियों के लिए कस्टम टाइमफ्रेम)।

### 15. API एकीकरण परत:
Historify लॉजिक को Angel One की विशिष्टताओं से अलग करने वाली एब्स्ट्रैक्शन लेयर बनाएं (अन्य ब्रोकर्स के भविष्य के जोड़ की अनुमति देने के लिए)।
- जेनेरिक इंटरफ़ेस परिभाषित करें (सिंबल मास्टर फेच करना, ऐतिहासिक डेटा फेच करना, लाइव डेटा फेच करना, ऑर्डर प्लेस करना)।
- Angel SmartAPI का उपयोग करके इन इंटरफ़ेस को लागू करने वाला Angel One एडाप्टर लागू करें।
- प्लगइन आर्किटेक्चर डिज़ाइन करें (कोर Historify कोड को संशोधित किए बिना नए ब्रोकर एडाप्टर जोड़ने की अनुमति)।
- डेटा नॉर्मलाइजेशन सुनिश्चित करें (स्टोरेज के लिए ब्रोकर-विशिष्ट प्रारूपों को सामान्य प्रारूप में परिवर्तित करना)।
- ब्रोकर-विशिष्ट कॉन्फ़िगरेशन, API एंडपॉइंट्स, रेट लिमिट्स, डेटा प्रारूपों को अलग से स्टोर करें।

### 16. यूजर इंटरफेस एकीकरण:
Historify के डेटा प्रबंधन को हमारे एप्लिकेशन UI में एकीकृत करें।
- डेटा प्रबंधन डैशबोर्ड बनाएं (डाउनलोड स्थिति, प्रति सिंबल डेटा कवरेज, गुणवत्ता मेट्रिक्स दिखाएं)।
- खोज, सेगमेंट द्वारा फ़िल्टर, प्रकार, एक्सपायरी, वॉचलिस्ट प्रबंधन के साथ सिंबल सेलेक्टर बनाएं।
- डाउनलोड कॉन्फ़िगरेशन फ़ॉर्म जोड़ें (उपयोगकर्ताओं को सिंबल, डेट रेंज, टाइमफ्रेम, शेड्यूलिंग निर्दिष्ट करने की अनुमति दें)।
- प्रगति निगरानी लागू करें (पॉज़, रिज़्यूम, कैंसिल विकल्पों के साथ रीयल-टाइम डाउनलोड प्रगति दिखाएं)।
- डेटा गुणवत्ता व्यूअर बनाएं (वैलिडेशन त्रुटियां, लापता डेटा अवधि, आंकड़े दिखाएं)।
- निर्यात इंटरफ़ेस जोड़ें (फ़िल्टर के साथ विभिन्न प्रारूपों में डेटा डाउनलोड करने की अनुमति दें)।
- सेटिंग्स पैनल बनाएं (वैलिडेशन और सहायता टेक्स्ट के साथ सभी Historify पैरामीटर कॉन्फ़िगर करने के लिए)।

### 17. परीक्षण और सत्यापन (Testing and Validation):
Historify एकीकरण के लिए व्यापक परीक्षण लागू करें।
- प्रत्येक डेटा प्रबंधन फ़ंक्शन के लिए यूनिट परीक्षण बनाएं (Angel One API प्रतिक्रियाओं का मॉक करें, एज केस का परीक्षण करें)।
- इंटीग्रेशन परीक्षण जोड़ें (टेस्ट अकाउंट का उपयोग करके वास्तविक API कॉल के साथ पूर्ण डाउनलोड प्रवाह का परीक्षण करें)।
- डेटा वैलिडेशन परीक्षण लागू करें (सुनिश्चित करें कि डाउनलोड किया गया डेटा अपेक्षित प्रारूप से मेल खाता है, एग्रीगेटेड टाइमफ्रेम के लिए गणना की जांच करें)।
- प्रदर्शन परीक्षण जोड़ें (डाउनलोड गति, डेटाबेस इंसर्ट गति, क्वेरी प्रदर्शन, बाधाओं की पहचान करना)।
- एंड-टू-एंड परीक्षण बनाएं (सिंबल चयन से डेटा निर्यात तक उपयोगकर्ता वर्कफ़्लो का अनुकरण)।
- निरंतर परीक्षण लागू करें (हर कोड परिवर्तन पर परीक्षण चलाएं, रिग्रेशन को जल्दी पकड़ें)।

---

## महत्वपूर्ण प्रतिबंध (CRITICAL CONSTRAINTS):

1.  **केवल Angel One** का डेटा स्रोत के रूप में उपयोग करें। कोई अन्य API नहीं, कोई बाहरी डेटा विक्रेता नहीं, कोई स्क्रैपिंग नहीं। सभी ऐतिहासिक डेटा Angel One SmartAPI ऐतिहासिक एंडपॉइंट से आने चाहिए। सभी रीयल-टाइम डेटा Angel One WebSocket से आने चाहिए। सभी सिंबल मास्टर Angel One इंस्ट्रूमेंट सूची से आने चाहिए। कोई अपवाद नहीं।
2.  Historify के SQLite स्कीमा को हमारे **PostgreSQL TimescaleDB** के अनुकूल बनाएं (टाइम-सीरीज डेटा के लिए हाइपरटेबल्स, उचित विभाजन, उपयुक्त इंडेक्स)।
3.  Historify के आर्किटेक्चर दर्शन को संरक्षित करें लेकिन हमारे टेक्नोलॉजी स्टैक का उपयोग करके लागू करें: बैकएंड सेवाओं के लिए **FastAPI**, UI घटकों के लिए **React**, स्टोरेज के लिए **TimescaleDB**, कैशिंग के लिए **Redis**।
4.  Angel One रेट लिमिट्स का सम्मान करें (उचित थ्रॉटलिंग और री-ट्राई लागू करें ताकि अकाउंट सस्पेंशन से बचा जा सके)।

## कार्यान्वयन संरचना (IMPLEMENTATION STRUCTURE):

Historify आर्किटेक्चर के आधार पर ये मॉड्यूल बनाएं:
*   `data_manager` मॉड्यूल: जिसमें `SymbolMaster`, `HistoricalDataDownloader`, `DataValidator`, `CorporateActionHandler` क्लास हों।
*   `storage` मॉड्यूल: `DatabaseManager`, `TimescaleManager`, `CacheManager` क्लास के साथ।
*   `angel_integration` मॉड्यूल: `AngelAPIClient`, `AngelWebSocketClient`, `RateLimiter` क्लास के साथ।
*   `export_backup` मॉड्यूल: `DataExporter`, `BackupManager` क्लास के साथ।
*   `monitoring` मॉड्यूल: `MetricsCollector`, `AlertManager` क्लास के साथ।
*   `api_layer` मॉड्यूल: डेटा प्रबंधन प्रणाली के साथ फ्रंटएंड की बातचीत के लिए REST एंडपॉइंट्स को उजागर करना।

प्रत्येक मॉड्यूल के लिए विस्तृत कार्यान्वयन विनिर्देश (implementation specification) प्रदान करें जिसमें क्लास संरचनाएं, मेथड सिग्नेचर, डेटाबेस स्कीमा, API एंडपॉइंट्स, त्रुटि हैंडलिंग, लॉगिंग, मॉनिटरिंग शामिल हों, जो Historify के सिद्ध पैटर्न का पालन करते हों लेकिन हमारे Angel One अनन्य मल्टी-सेगमेंट ट्रेडिंग एप्लिकेशन के लिए अनुकूलित हों।
